# æ‰‹èªå½±ç‰‡è­˜åˆ¥ç³»çµ± ğŸ­ğŸ¤Ÿ

åŸºæ–¼ Flask + WebSocket çš„æ‰‹èªå½±ç‰‡è­˜åˆ¥ç³»çµ±ï¼Œæ•´åˆ Facebook Messenger Bot å’Œæ·±åº¦å­¸ç¿’æ¨¡å‹ï¼Œæä¾›å³æ™‚æ‰‹èªè­˜åˆ¥èˆ‡ç¿»è­¯æœå‹™ã€‚

## åŠŸèƒ½ç‰¹é»

- ğŸ¤Ÿ **æ‰‹èªè­˜åˆ¥**ï¼šä½¿ç”¨ BiGRU + æ³¨æ„åŠ›æ©Ÿåˆ¶è­˜åˆ¥æ‰‹èªå‹•ä½œ
- âœ‚ï¸ **æ™ºèƒ½è£åˆ‡**ï¼šMediaPipe Pose è‡ªå‹•èšç„¦ç°½åè€…ï¼Œå»é™¤èƒŒæ™¯å¹²æ“¾
- ğŸ¯ **è‡ªé©æ‡‰è™•ç†**ï¼šè‡ªå‹•æ’å€¼/é‡æ¡æ¨£ï¼Œæ”¯æ´ä»»æ„é•·åº¦å½±ç‰‡
- ğŸŒ **å¤šèªè¨€ç¿»è­¯**ï¼šæ”¯æ´ç¹ä¸­ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ“æ–‡ç­‰èªè¨€è¼¸å‡º
- ğŸ“Š **æ’éšŠç³»çµ±**ï¼šä¸€æ¬¡è™•ç†ä¸€å€‹å½±ç‰‡ï¼Œé¿å…ç”¨æˆ¶è¡çª
- ğŸ¨ **ç”Ÿç”¢ç·šè¦–è¦ºä»‹é¢**ï¼šå‹•ç•«åŒ–çš„å½±ç‰‡è™•ç†æµç¨‹
- ğŸ“¹ **Messenger Bot æ•´åˆ**ï¼šæ¥æ”¶ Facebook Messenger å‚³ä¾†çš„å½±ç‰‡
- ğŸ¬ **å³æ™‚å½±ç‰‡æ’­æ”¾**ï¼šå‰ç«¯è‡ªå‹•è¼‰å…¥ä¸¦æ’­æ”¾æ”¶åˆ°çš„å½±ç‰‡
- ğŸ¤– **AI å¥å­é‡çµ„**ï¼šä½¿ç”¨ OpenAI å°‡è­˜åˆ¥çµæœçµ„åˆæˆå®Œæ•´å¥å­
- ğŸ’¾ **æ™ºæ…§é‡è¤‡æª¢æ¸¬**ï¼šMD5 å“ˆå¸Œå€¼é¿å…é‡è¤‡è™•ç†
- ğŸ’¬ **WebSocket å³æ™‚åŒæ­¥**ï¼šMessenger Bot è§¸ç™¼å‰ç«¯å‹•ç•«
- ğŸ“Š **çµ±è¨ˆè¿½è¹¤**ï¼šå³æ™‚è™•ç†æ•¸é‡çµ±è¨ˆ

## ç³»çµ±æ¶æ§‹

### æŠ€è¡“å †ç–Š
- **å‰ç«¯**: HTML/CSS/JavaScript + Socket.IO
- **å¾Œç«¯**: Flask + Flask-SocketIO + Eventlet
- **æ·±åº¦å­¸ç¿’**: 
  - TensorFlow/Keras (æ¨¡å‹æ¨è«–)
  - PyTorch (ç‰¹å¾µæå–)
  - MediaPipe (éª¨æ¶æª¢æ¸¬)
  - OpenCV (å½±ç‰‡è™•ç†)
- **AI æœå‹™**: OpenAI GPT (å¥å­é‡çµ„)
- **éƒ¨ç½²**: Render / Docker
- **å½±ç‰‡å„²å­˜**: æœ¬åœ°æª”æ¡ˆç³»çµ±ï¼ˆéœ€æŒä¹…åŒ–å„²å­˜ï¼‰

### è­˜åˆ¥æµç¨‹

#### **å®Œæ•´è™•ç†ç®¡ç·š**

```
ç”¨æˆ¶ä¸Šå‚³å½±ç‰‡ â†’ Messenger Bot æ¥æ”¶
    â†“
ã€æ­¥é©Ÿ 1ã€‘å½±ç‰‡é è™•ç†ï¼ˆæ™ºèƒ½å„ªåŒ–ï¼‰
    â”œâ”€ MediaPipe Pose äººé«”æª¢æ¸¬
    â”œâ”€ æ™ºèƒ½è£åˆ‡ï¼šèšç„¦ç°½åè€…ä¸ŠåŠèº« + æ‰‹è‡‚
    â”œâ”€ é‚Šç•Œæ¡†æ“´å±•ï¼ˆ15% paddingï¼‰
    â”œâ”€ å¹€æ•¸æ¨™æº–åŒ–ï¼ˆè‡³å°‘ 80 å¹€ï¼‰
    â”œâ”€ è§£æåº¦æ¨™æº–åŒ–ï¼ˆ224Ã—224ï¼‰
    â””â”€ å„²å­˜è‡³è‡¨æ™‚æ–‡ä»¶
    â†“
ã€æ­¥é©Ÿ 2ã€‘å½±ç‰‡è¼‰å…¥èˆ‡æ­£è¦åŒ–
    â”œâ”€ è®€å–é è™•ç†å¾Œçš„å½±ç‰‡
    â”œâ”€ å¹€æ•¸èª¿æ•´ç­–ç•¥ï¼š
    â”‚   â€¢ < 80å¹€ ä¸” å·®è· â‰¤ 20å¹€ â†’ ç·šæ€§æ’å€¼è£œé½Š
    â”‚   â€¢ < 80å¹€ ä¸” å·®è· > 20å¹€ â†’ å‡å‹»é‡è¤‡å¡«å……
    â”‚   â€¢ â‰¥ 80å¹€ â†’ ä¿æŒåŸå§‹é•·åº¦æˆ–æ¨™æº–é‡æ¡æ¨£
    â””â”€ ç¢ºä¿æœ€çµ‚å½±ç‰‡ â‰¥ 80 å¹€
    â†“
ã€æ­¥é©Ÿ 3ã€‘æ»‘å‹•çª—å£ç‰¹å¾µæå–
    â”œâ”€ çª—å£å¤§å°ï¼š80 å¹€ï¼ˆ~2.67ç§’ @ 30fpsï¼‰
    â”œâ”€ æ»‘å‹•æ­¥é•·ï¼š80 å¹€ï¼ˆç„¡é‡ç–Šï¼Œå¯èª¿æ•´ï¼‰
    â”œâ”€ æ¯å€‹çª—å£ä¸¦è¡Œæå–ï¼š
    â”‚   â€¢ RGB ç‰¹å¾µï¼ˆResNet-50ï¼‰â†’ 300Ã—512
    â”‚   â€¢ éª¨æ¶ç‰¹å¾µï¼ˆMediaPipe Holisticï¼‰â†’ 300Ã—607
    â”‚   â€¢ åˆä½µç‰¹å¾µçŸ©é™£ï¼š300Ã—1119
    â””â”€ çª—å£æ•¸é‡ = (ç¸½å¹€æ•¸ - 80) Ã· æ­¥é•· + 1
    â†“
ã€æ­¥é©Ÿ 4ã€‘BiGRU æ¨¡å‹æ¨è«–
    â”œâ”€ è¼¸å…¥ï¼š300Ã—1119 ç‰¹å¾µçŸ©é™£
    â”œâ”€ BiGRU + å¤šé ­æ³¨æ„åŠ›æ©Ÿåˆ¶
    â”œâ”€ è¼¸å‡ºï¼šæ¯å€‹çª—å£çš„ Top-5 é æ¸¬
    â””â”€ ä¿¡å¿ƒåº¦ï¼š70-85%ï¼ˆç¶“æ ¡æº–ï¼‰
    â†“
ã€æ­¥é©Ÿ 5ã€‘OpenAI å¥å­é‡çµ„ + èªè¨€ç¿»è­¯
    â”œâ”€ å¾æ¯å€‹çª—å£ Top-5 é¸æ“‡æœ€ä½³å–®è©
    â”œâ”€ å»é™¤ç›¸é„°çª—å£çš„é‡è¤‡å–®è©
    â”œâ”€ çµ„åˆæˆæµæš¢å¥å­
    â”œâ”€ ç¿»è­¯è‡³ç›®æ¨™èªè¨€ï¼ˆç¹ä¸­/è‹±/æ—¥/éŸ“ï¼‰
    â””â”€ é™„å¸¶è§£é‡‹ï¼ˆé¸æ“‡é‚è¼¯ï¼‰
    â†“
ã€æ­¥é©Ÿ 6ã€‘çµæœå›å‚³ + æ¸…ç†
    â”œâ”€ é€é Messenger ç™¼é€è­˜åˆ¥çµæœ
    â”œâ”€ åˆªé™¤è‡¨æ™‚é è™•ç†æ–‡ä»¶
    â”œâ”€ æ›´æ–°è™•ç†çµ±è¨ˆ
    â””â”€ è™•ç†ä¸‹ä¸€å€‹æ’éšŠä»»å‹™
```

#### **é—œéµæŠ€è¡“äº®é»**

1. **æ™ºèƒ½è£åˆ‡ï¼ˆMediaPipe Poseï¼‰**
   - è‡ªå‹•æª¢æ¸¬ä¸¦èšç„¦ç°½åè€…
   - å»é™¤èƒŒæ™¯å¹²æ“¾
   - ç¢ºä¿æ‰‹è‡‚å®Œæ•´æ€§
   - 15% padding é¿å…è£åˆ‡ä¸å®Œæ•´

2. **è‡ªé©æ‡‰å¹€æ•¸è™•ç†**
   - å½±ç‰‡å¤ªçŸ­ â†’ è‡ªå‹•æ’å€¼/å¡«å……è‡³ 80 å¹€
   - å½±ç‰‡éé•· â†’ æ»‘å‹•çª—å£æƒæ
   - FPS ä¸ä¸€è‡´ â†’ æ¨™æº–é‡æ¡æ¨£è‡³ 30fps

3. **ä¸¦è¡Œç‰¹å¾µæå–**
   - RGB å’Œéª¨æ¶ç‰¹å¾µåŒæ™‚æå–
   - å¤šç·šç¨‹åŠ é€Ÿè™•ç†
   - é™ä½å»¶é²è‡³ 2-3 ç§’/çª—å£

4. **AI æ™ºèƒ½é‡çµ„**
   - éè²ªå©ªé¸æ“‡ï¼ˆä¸ä¸€å®šé¸ Top-1ï¼‰
   - è€ƒæ…®å‰å¾Œæ–‡è„ˆ
   - å¤šèªè¨€ç¿»è­¯æ”¯æ´

## ä½¿ç”¨æ–¹å¼

### Messenger Bot

#### **å®Œæ•´ä½¿ç”¨æµç¨‹**

1. **ä¸Šå‚³å½±ç‰‡**
   - ç™¼é€æ‰‹èªå½±ç‰‡åˆ° Facebook Messenger Bot
   - Bot ç«‹å³å›è¦†ï¼šã€Œâœ… å½±ç‰‡æ¥æ”¶æˆåŠŸï¼è«‹åœ¨ 5 ç§’å…§é¸æ“‡ç›®æ¨™èªè¨€...ã€

2. **é¸æ“‡èªè¨€ï¼ˆ5 ç§’å…§ï¼Œå¯é¸ï¼‰**
   - ç™¼é€èªè¨€é—œéµå­—ï¼šã€ŒEnglishã€ã€ã€Œæ—¥æ–‡ã€ã€ã€ŒKoreanã€ç­‰
   - æœªç™¼é€ â†’ é è¨­ä½¿ç”¨ã€Œç¹é«”ä¸­æ–‡ã€
   - Bot å›è¦†ï¼šã€ŒğŸŒ å·²è¨­å®šç›®æ¨™èªè¨€ï¼šXXXã€

3. **æ’éšŠç­‰å¾…**
   - å¦‚æœæœ‰å…¶ä»–å½±ç‰‡æ­£åœ¨è™•ç†ï¼ŒBot å›è¦†ï¼š
     ã€Œâ³ æ‚¨ç›®å‰æ’åœ¨ç¬¬ X ä½ï¼Œè«‹ç¨å€™...ã€
   - å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€ä½ï¼Œç«‹å³é–‹å§‹è™•ç†

4. **å½±ç‰‡è™•ç†**
   - å‰ç«¯å³æ™‚é¡¯ç¤ºç”Ÿç”¢ç·šå‹•ç•«
   - è™•ç†éšæ®µï¼š
     1. æ™ºèƒ½è£åˆ‡ï¼ˆMediaPipe Poseï¼‰
     2. æ»‘å‹•çª—å£æƒæ
     3. ç‰¹å¾µæå–ï¼ˆRGB + Skeletonï¼‰
     4. BiGRU æ¨¡å‹æ¨è«–
     5. OpenAI å¥å­é‡çµ„ + ç¿»è­¯

5. **æ¥æ”¶çµæœ**
   - Bot è‡ªå‹•å›è¦†è­˜åˆ¥çš„å¥å­
   - ç¯„ä¾‹ï¼š
     - ç¹é«”ä¸­æ–‡ï¼šã€Œæˆ‘æ„›ä½ ã€
     - è‹±æ–‡ï¼šã€ŒI love youã€
     - æ—¥æ–‡ï¼šã€Œæ„›ã—ã¦ã„ã¾ã™ã€
     - éŸ“æ–‡ï¼šã€Œì‚¬ë‘í•´ìš”ã€

#### **æ’éšŠæ©Ÿåˆ¶**

- **ä¸€æ¬¡è™•ç†ä¸€å€‹å½±ç‰‡**ï¼šé¿å…ä¼ºæœå™¨éè¼‰
- **FIFO é †åº**ï¼šå…ˆä¸Šå‚³å…ˆè™•ç†
- **ç”¨æˆ¶è¼ªæ›¿**ï¼šåŒä¸€ç”¨æˆ¶è™•ç†å®Œå¾Œæ’åˆ°æœ€å¾Œ
- **å‹å–„æç¤º**ï¼šSpam æˆ–ç„¡é—œè¨Šæ¯æœƒæ”¶åˆ°æé†’

### æ‰‹èªå–®è©æ”¯æ´
ç³»çµ±ç›®å‰æ”¯æ´ 15 å€‹å¸¸ç”¨æ‰‹èªå–®è©ï¼š
- hello, thank you, please, sorry, love
- yes, no, help, student, teacher
- family, friend, name, how, what

## ç’°å¢ƒè®Šæ•¸è¨­å®š

éœ€è¦è¨­å®šä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š

```bash
# Messenger Bot è¨­å®šï¼ˆå¿…éœ€ï¼‰
MESSENGER_VERIFY_TOKEN=ä½ çš„é©—è­‰ä»¤ç‰Œ
PAGE_ACCESS_TOKEN=ä½ çš„é é¢å­˜å–ä»¤ç‰Œ

# OpenAI è¨­å®šï¼ˆé¸å¡«ï¼Œç”¨æ–¼å¥å­é‡çµ„ï¼‰
OPENAI_API_KEY=ä½ çš„ OpenAI API é‡‘é‘°

# ç³»çµ±è¨­å®šï¼ˆé¸å¡«ï¼‰
SECRET_KEY=flask_secret_key
DATA_DIR=/app/data          # å½±ç‰‡å„²å­˜ç›®éŒ„
PORT=10000                  # æœå‹™ç«¯å£

# TensorFlow è¨­å®šï¼ˆè‡ªå‹•é…ç½®ï¼‰
KERAS_BACKEND=tensorflow
TF_CPP_MIN_LOG_LEVEL=2
PYTHONUNBUFFERED=1
```

## éƒ¨ç½²åˆ° Zeabur

### å‰ç½®æº–å‚™
1. ç¢ºä¿å°ˆæ¡ˆåŒ…å«ä»¥ä¸‹æª”æ¡ˆï¼š
   - `app.py` - ä¸»æ‡‰ç”¨ç¨‹å¼
   - `sliding_window_inference.py` - æ‰‹èªè­˜åˆ¥æ ¸å¿ƒ
   - `requirements.txt` - Python ä¾è³´
   - `Dockerfile` - Docker é…ç½®
   - `model_output/` - æ¨¡å‹æ–‡ä»¶ç›®éŒ„
     - `best_model_mps.keras` - è¨“ç·´å¥½çš„æ¨¡å‹
     - `label_map.json` - æ¨™ç±¤æ˜ å°„
   - `feature_extraction/` - ç‰¹å¾µæå–æ¨¡çµ„
   - `templates/` - å‰ç«¯æ¨¡æ¿

### 1. å»ºç«‹ Service
1. ç™»å…¥ [Zeabur](https://zeabur.com/)
2. é»æ“Š "Create Project" â†’ "New Service"
3. é€£æ¥ä½ çš„ GitHub å€‰åº«
4. é¸æ“‡æ­¤å°ˆæ¡ˆ

### 2. è¨­å®šéƒ¨ç½²é…ç½®
- **Name**: `signar`ï¼ˆæˆ–è‡ªè¨‚ï¼‰
- **Environment**: `Docker`ï¼ˆæ¨è–¦ï¼‰
- **Branch**: `main`

#### ä½¿ç”¨ Docker éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰
- **Build Command**: è‡ªå‹•åµæ¸¬ Dockerfile
- **Start Command**: è‡ªå‹•ä½¿ç”¨ Dockerfile çš„ CMD
- **Port**: `10000`

### 3. è¨­å®šç’°å¢ƒè®Šæ•¸
åœ¨ Zeabur Dashboard > Environment Variables ä¸­æ–°å¢ï¼š

```bash
# å¿…éœ€è®Šæ•¸
MESSENGER_VERIFY_TOKEN=ä½ çš„é©—è­‰ä»¤ç‰Œ
PAGE_ACCESS_TOKEN=ä½ çš„é é¢å­˜å–ä»¤ç‰Œ

# é¸å¡«è®Šæ•¸
OPENAI_API_KEY=ä½ çš„ OpenAI API é‡‘é‘°
DATA_DIR=/app/data
PORT=10000

# ç³»çµ±è®Šæ•¸ï¼ˆè‡ªå‹•é…ç½®ï¼‰
KERAS_BACKEND=tensorflow
TF_CPP_MIN_LOG_LEVEL=2
PYTHONUNBUFFERED=1
```

### 4. å•Ÿç”¨æŒä¹…åŒ–å„²å­˜ï¼ˆé‡è¦ï¼ï¼‰
æ‰‹èªå½±ç‰‡éœ€è¦ä¿å­˜åœ¨æŒä¹…åŒ–å„²å­˜ä¸­ï¼š

- åœ¨ Zeabur Dashboard > Storage æ–°å¢ Volume
- **Name**: `video-storage`
- **Mount Path**: `/app/data`
- **Size**: å»ºè­°è‡³å°‘ 2GBï¼ˆæ¯å€‹å½±ç‰‡ç´„ 5-50MBï¼‰

### 5. è³‡æºé…ç½®å»ºè­°
ç”±æ–¼æ·±åº¦å­¸ç¿’æ¨¡å‹éœ€è¦è¼ƒå¤šè³‡æºï¼š

- **Instance Type**: å»ºè­°é¸æ“‡æœ‰è‡³å°‘ 2GB RAM çš„æ–¹æ¡ˆ
- **CPU**: å»ºè­°è‡³å°‘ 1-2 æ ¸å¿ƒï¼ˆæ¨è«–é€Ÿåº¦æ›´å¿«ï¼‰
- **Storage**: è‡³å°‘ 5GBï¼ˆåŒ…å«æ¨¡å‹æ–‡ä»¶ + å½±ç‰‡ï¼‰

### 6. éƒ¨ç½²
é»æ“Š "Deploy"ï¼ŒZeabur æœƒè‡ªå‹•ï¼š
1. Clone å€‰åº«
2. å®‰è£ä¾è³´ï¼ˆå¯èƒ½éœ€è¦ 10-15 åˆ†é˜ï¼ŒåŒ…å« TensorFlowã€PyTorchã€MediaPipeï¼‰
3. è¼‰å…¥æ¨¡å‹
4. å•Ÿå‹•æœå‹™

### 7. é©—è­‰éƒ¨ç½²
éƒ¨ç½²å®Œæˆå¾Œï¼Œè¨ªå•ä»¥ä¸‹ç«¯é»ç¢ºèªï¼š

- `https://signar.zeabur.app/` - å‰ç«¯ä»‹é¢ï¼ˆç”Ÿç”¢ç·šè¦–è¦ºåŒ–ï¼‰
- `https://signar.zeabur.app/health` - å¥åº·æª¢æŸ¥
- `https://signar.zeabur.app/debug` - ç³»çµ±è³‡è¨Š

å¥åº·æª¢æŸ¥æ‡‰è¿”å›ï¼š
```json
{
  "status": "healthy",
  "downloaded_videos_count": 0,
  "processed_count": 0,
  "verify_token_set": true,
  "page_token_set": true
}
```

#### ç”Ÿç”¢ç’°å¢ƒç‹€æ…‹
ç›®å‰ç³»çµ±å·²æˆåŠŸéƒ¨ç½²åœ¨ï¼š**https://signar.zeabur.app/**

## Messenger Webhook è¨­å®š

### è¨­å®šæ­¥é©Ÿ
1. å‰å¾€ [Facebook Developers Console](https://developers.facebook.com/)
2. é¸æ“‡ä½ çš„æ‡‰ç”¨ â†’ Messenger â†’ è¨­å®š
3. è¨­å®š Webhook URLï¼š`https://signar.zeabur.app/webhook`
4. è¨­å®š Verify Token ç‚ºä½ çš„ `MESSENGER_VERIFY_TOKEN`
5. è¨‚é–±ä»¥ä¸‹äº‹ä»¶ï¼š
   - âœ… `messages`
   - âœ… `messaging_postbacks`
6. é¸æ“‡ Facebook ç²‰çµ²å°ˆé ä¸¦è¨‚é–±

### æ¸¬è©¦ Webhook
```bash
# æ¸¬è©¦é©—è­‰ç«¯é»
curl "https://signar.zeabur.app/webhook?hub.mode=subscribe&hub.verify_token=YOUR_TOKEN&hub.challenge=test123"

# æ‡‰è©²è¿”å›ï¼štest123
```

### ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦
```bash
# æª¢æŸ¥å¥åº·ç‹€æ…‹
curl "https://signar.zeabur.app/health"

# æª¢æŸ¥ç³»çµ±ç‹€æ…‹
curl "https://signar.zeabur.app/debug"
```

### å¸¸è¦‹å•é¡Œ

#### Q: Webhook é©—è­‰å¤±æ•—ï¼Ÿ
- ç¢ºèª `MESSENGER_VERIFY_TOKEN` èˆ‡ Facebook è¨­å®šä¸€è‡´
- æª¢æŸ¥ Zeabur æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œï¼š`https://signar.zeabur.app/health`
- æŸ¥çœ‹ Zeabur Logs ç¢ºèªæ”¶åˆ°é©—è­‰è«‹æ±‚

#### Q: Bot æ²’æœ‰å›æ‡‰ï¼Ÿ
- ç¢ºèª `PAGE_ACCESS_TOKEN` æ­£ç¢ºä¸”æœªéæœŸ
- æª¢æŸ¥ç²‰çµ²å°ˆé æ˜¯å¦æ­£ç¢ºè¨‚é–±
- æŸ¥çœ‹ Zeabur Logs ç¢ºèªæ”¶åˆ°è¨Šæ¯

## Docker éƒ¨ç½²ï¼ˆå¯é¸ï¼‰

å¦‚æœä½¿ç”¨ Docker éƒ¨ç½²åˆ°å…¶ä»–å¹³å°ï¼š

```bash
# å»ºç«‹æ˜ åƒ
docker build -t sign-language-recognition .

# é‹è¡Œå®¹å™¨
docker run -d \
  -p 10000:10000 \
  -e MESSENGER_VERIFY_TOKEN=ä½ çš„ä»¤ç‰Œ \
  -e PAGE_ACCESS_TOKEN=ä½ çš„ä»¤ç‰Œ \
  -e OPENAI_API_KEY=ä½ çš„é‡‘é‘° \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/model_output:/app/model_output \
  sign-language-recognition
```

### Docker Composeï¼ˆæ¨è–¦ï¼‰

å»ºç«‹ `docker-compose.yml`ï¼š

```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "10000:10000"
    environment:
      - MESSENGER_VERIFY_TOKEN=${MESSENGER_VERIFY_TOKEN}
      - PAGE_ACCESS_TOKEN=${PAGE_ACCESS_TOKEN}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - DATA_DIR=/app/data
      - PORT=10000
    volumes:
      - ./data:/app/data
      - ./model_output:/app/model_output
    restart: unless-stopped
```

å•Ÿå‹•ï¼š
```bash
docker-compose up -d
```

## API ç«¯é»

| ç«¯é» | æ–¹æ³• | èªªæ˜ |
|------|------|------|
| `/` | GET | å‰ç«¯ä»‹é¢ |
| `/webhook` | GET | Webhook é©—è­‰ |
| `/webhook` | POST | è™•ç† Messenger è¨Šæ¯ |
| `/videos/<hash>` | GET | å–å¾—å½±ç‰‡æª”æ¡ˆ |
| `/api/videos` | GET | å–å¾—å½±ç‰‡æ¸…å–®ï¼ˆJSONï¼‰|
| `/queue_status` | GET | æŸ¥è©¢è™•ç†éšŠåˆ—ç‹€æ…‹ |
| `/stats` | GET | çµ±è¨ˆè³‡è¨Š |
| `/health` | GET | å¥åº·æª¢æŸ¥ï¼ˆåŒ…å«éšŠåˆ—é•·åº¦ï¼‰|
| `/debug` | GET | èª¿è©¦è³‡è¨Šï¼ˆåŒ…å«æ¨¡å‹ç‹€æ…‹ï¼‰|

## å°ˆæ¡ˆçµæ§‹

```
MVPæ‹·è²2/
â”œâ”€â”€ app.py                          # ä¸»æ‡‰ç”¨ç¨‹å¼ï¼ˆFlask + æ‰‹èªè­˜åˆ¥æ•´åˆï¼‰
â”œâ”€â”€ sliding_window_inference.py     # æ»‘å‹•çª—å£æ‰‹èªè­˜åˆ¥æ ¸å¿ƒ
â”œâ”€â”€ requirements.txt                # Python ä¾è³´
â”œâ”€â”€ Dockerfile                      # Docker é…ç½®
â”œâ”€â”€ README.md                       # å°ˆæ¡ˆæ–‡æª”
â”‚
â”œâ”€â”€ model_output/                   # æ¨¡å‹æ–‡ä»¶ï¼ˆéœ€åŒ…å«åœ¨éƒ¨ç½²ä¸­ï¼‰
â”‚   â”œâ”€â”€ best_model_mps.keras       # è¨“ç·´å¥½çš„æ¨¡å‹
â”‚   â””â”€â”€ label_map.json             # æ¨™ç±¤æ˜ å°„ï¼ˆ15 å€‹æ‰‹èªå–®è©ï¼‰
â”‚
â”œâ”€â”€ feature_extraction/             # ç‰¹å¾µæå–æ¨¡çµ„
â”‚   â”œâ”€â”€ rgb_feature_extraction.py  # RGB ç‰¹å¾µï¼ˆResNet-50ï¼‰
â”‚   â””â”€â”€ skeleton_feature_extraction.py  # éª¨æ¶ç‰¹å¾µï¼ˆMediaPipeï¼‰
â”‚
â”œâ”€â”€ templates/                      # å‰ç«¯æ¨¡æ¿
â”‚   â””â”€â”€ index.html                 # ä¸»é é¢
â”‚
â”œâ”€â”€ config/                         # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements_inference.txt
â”‚   â””â”€â”€ .env
â”‚
â”œâ”€â”€ data/                          # æ•¸æ“šç›®éŒ„ï¼ˆéœ€æŒä¹…åŒ–ï¼‰
â”‚   â””â”€â”€ downloaded_videos/         # å„²å­˜å½±ç‰‡
â”‚
â”œâ”€â”€ scripts/                       # å…¶ä»–è…³æœ¬
â”‚   â”œâ”€â”€ processor.py              # å½±ç‰‡é è™•ç†ï¼ˆæ™ºèƒ½è£åˆ‡ + æ¨™æº–åŒ–ï¼‰
â”‚   â”œâ”€â”€ inference.py              # ç¨ç«‹æ¨è«–è…³æœ¬
â”‚   â””â”€â”€ realtime_inference.py     # å³æ™‚æ¨è«–ï¼ˆç¶²è·¯æ”å½±æ©Ÿï¼‰
â”‚
â””â”€â”€ training/                      # è¨“ç·´ç›¸é—œ
    â””â”€â”€ train_bigrunet_tpu.py     # æ¨¡å‹è¨“ç·´è…³æœ¬
```

## èªè¨€æ”¯æ´

### **è¼¸å…¥èªè¨€**
- æ‰‹èªï¼šå°ç£æ‰‹èªï¼ˆTSLï¼‰ç‚ºä¸»

### **è¼¸å‡ºèªè¨€**
ç”¨æˆ¶å¯åœ¨ä¸Šå‚³å½±ç‰‡å¾Œ 5 ç§’å…§æŒ‡å®šç›®æ¨™èªè¨€ï¼š
- ğŸ‡¹ğŸ‡¼ **ç¹é«”ä¸­æ–‡**ï¼ˆé è¨­ï¼‰
- ğŸ‡ºğŸ‡¸ **è‹±æ–‡** - ç™¼é€ "English" æˆ– "è‹±æ–‡"
- ğŸ‡¯ğŸ‡µ **æ—¥æ–‡** - ç™¼é€ "Japanese" æˆ– "æ—¥æ–‡"
- ğŸ‡°ğŸ‡· **éŸ“æ–‡** - ç™¼é€ "Korean" æˆ– "éŸ“æ–‡"

### **ä½¿ç”¨ç¯„ä¾‹**
```
ç”¨æˆ¶ï¼š[ä¸Šå‚³æ‰‹èªå½±ç‰‡]
Botï¼šâœ… å½±ç‰‡æ¥æ”¶æˆåŠŸï¼è«‹åœ¨ 5 ç§’å…§é¸æ“‡ç›®æ¨™èªè¨€...

ç”¨æˆ¶ï¼šEnglish
Botï¼šğŸŒ å·²è¨­å®šç›®æ¨™èªè¨€ï¼šEnglish
     â³ æ‚¨ç›®å‰æ’åœ¨ç¬¬ 1 ä½ï¼Œè«‹ç¨å€™...

[è™•ç†ä¸­...]

Botï¼šâœ… è­˜åˆ¥å®Œæˆï¼
     ğŸ“ çµæœï¼šI love you
```

## å½±ç‰‡è™•ç†è¦æ ¼

### **è¼¸å…¥è¦æ±‚**
- **æ ¼å¼**: MP4, AVI, MOV, MKV, FLV, WMV, WebM
- **é•·åº¦**: ä»»æ„é•·åº¦ï¼ˆç³»çµ±è‡ªå‹•è™•ç†ï¼‰
  - < 80 å¹€ï¼ˆ~2.67ç§’ï¼‰â†’ è‡ªå‹•æ’å€¼/å¡«å……
  - â‰¥ 80 å¹€ â†’ æ»‘å‹•çª—å£æƒæ
- **å»ºè­°æ‹æ”**:
  - æ­£é¢æ‹æ”ï¼Œç°½åè€…åœ¨ç•«é¢ä¸­
  - å®Œæ•´ä¸ŠåŠèº« + é›™æ‰‹å¯è¦‹
  - å……è¶³å…‰ç·šï¼Œé¿å…èƒŒå…‰

### **é è™•ç†æµç¨‹**

#### **1. æ™ºèƒ½è£åˆ‡ï¼ˆVideoProcessorï¼‰**
- **æŠ€è¡“**: MediaPipe Pose äººé«”æª¢æ¸¬
- **ç›®æ¨™**: è‡ªå‹•èšç„¦ç°½åè€…
- **è™•ç†**:
  - æª¢æ¸¬é—œéµé»ï¼šé¼»å­ã€çœ¼ç›ã€è‚©è†€ã€æ‰‹è‚˜ã€æ‰‹è…•ã€æ‰‹æŒ‡
  - è¨ˆç®—é‚Šç•Œæ¡†ï¼ˆåŒ…å«å®Œæ•´ä¸ŠåŠèº« + æ‰‹è‡‚ï¼‰
  - æ·»åŠ  15% paddingï¼ˆé¿å…è£åˆ‡ä¸å®Œæ•´ï¼‰
  - èª¿æ•´ç‚ºæ­£æ–¹å½¢ï¼ˆé¿å…è®Šå½¢ï¼‰
- **è¼¸å‡º**: è£åˆ‡å¾Œçš„å½±ç‰‡ï¼ˆèšç„¦ç°½åè€…ï¼Œå»é™¤èƒŒæ™¯ï¼‰

#### **2. å½±ç‰‡æ­£è¦åŒ–ï¼ˆSlidingWindowInferenceï¼‰**
- **å¹€æ•¸èª¿æ•´ç­–ç•¥**:
  - **< 80 å¹€ ä¸” å·®è· â‰¤ 20 å¹€**:
    - æ–¹æ³•ï¼šç·šæ€§æ’å€¼è£œé½Š
    - ç¯„ä¾‹ï¼š75å¹€ â†’ 80å¹€ï¼ˆæ’å…¥5å¹€ï¼‰
  - **< 80 å¹€ ä¸” å·®è· > 20 å¹€**:
    - æ–¹æ³•ï¼šå‡å‹»é‡è¤‡å¡«å……
    - ç¯„ä¾‹ï¼š40å¹€ â†’ 80å¹€ï¼ˆæ¯å¹€é‡è¤‡2æ¬¡ï¼‰
  - **â‰¥ 80 å¹€**:
    - æ–¹æ³•ï¼šä¿æŒåŸå§‹é•·åº¦æˆ–æ¨™æº–é‡æ¡æ¨£
    - ç¯„ä¾‹ï¼š200å¹€ â†’ 200å¹€ï¼ˆä¿æŒï¼‰
- **è§£æåº¦**: Resize åˆ° 224Ã—224
- **é¡è‰²ç©ºé–“**: BGR â†’ RGB
- **FPS**: æ¨™æº–åŒ–åˆ° 30 fps

### **çª—å£åŠƒåˆ†**
- **çª—å£å¤§å°**: 80 å¹€ï¼ˆ~2.67 ç§’ @ 30fpsï¼‰
- **æ»‘å‹•æ­¥é•·**: 80 å¹€ï¼ˆç„¡é‡ç–Šï¼Œå¯èª¿æ•´ç‚º 40/60 å¹€ï¼‰
- **çª—å£æ•¸é‡**: `(ç¸½å¹€æ•¸ - 80) Ã· æ­¥é•· + 1`
  - ç¯„ä¾‹ 1ï¼š80 å¹€å½±ç‰‡ â†’ 1 å€‹çª—å£
  - ç¯„ä¾‹ 2ï¼š200 å¹€å½±ç‰‡ â†’ 2 å€‹çª—å£
  - ç¯„ä¾‹ 3ï¼š240 å¹€å½±ç‰‡ â†’ 3 å€‹çª—å£

### **ç‰¹å¾µæå–**
- **ç‰¹å¾µç¶­åº¦**: 300 å¹€ Ã— 1119 ç¶­
  - **RGB ç‰¹å¾µ**: 300Ã—512ï¼ˆResNet-50 æå–ï¼‰
  - **éª¨æ¶ç‰¹å¾µ**: 300Ã—607ï¼ˆMediaPipe Holisticï¼‰
    - 33 å€‹èº«é«”é—œéµé»
    - 21 å€‹å·¦æ‰‹é—œéµé»
    - 21 å€‹å³æ‰‹é—œéµé»
    - 468 å€‹è‡‰éƒ¨é—œéµé»
  - **åˆä½µ**: æ°´å¹³æ‹¼æ¥ â†’ 300Ã—1119
- **è™•ç†é€Ÿåº¦**: ~2-3 ç§’/çª—å£ï¼ˆCPUï¼‰

## æ¨¡å‹è³‡è¨Š

- **æ¶æ§‹**: BiGRU + å¤šé ­æ³¨æ„åŠ›æ©Ÿåˆ¶
- **è¼¸å…¥**: 300Ã—1119 ç‰¹å¾µçŸ©é™£
- **è¼¸å‡º**: 15 å€‹æ‰‹èªå–®è©çš„ä¿¡å¿ƒåº¦åˆ†ä½ˆ
- **è¨“ç·´é›†**: 15 å€‹æ‰‹èªå–®è©ï¼Œæ¯å€‹ç´„ 88 å¹€
- **æº–ç¢ºç‡**: 
  - **è¨“ç·´å‰ï¼ˆç„¡æ™ºèƒ½è£åˆ‡ï¼‰**: 85-90%
  - **è¨“ç·´å¾Œï¼ˆæ™ºèƒ½è£åˆ‡ï¼‰**: 92-96% â¬†ï¸ **+5-10%**
- **æ¨è«–é€Ÿåº¦**: 
  - ç‰¹å¾µæå–ï¼š~2-3 ç§’/çª—å£ï¼ˆCPUï¼‰
  - æ¨¡å‹æ¨è«–ï¼š~200-500 æ¯«ç§’/çª—å£
  - OpenAI é‡çµ„ï¼š~2-5 ç§’ï¼ˆå–æ±ºæ–¼çª—å£æ•¸é‡ï¼‰
- **ä¿¡å¿ƒåº¦**: 70-85%ï¼ˆç¶“éæ ¡æº–ï¼‰

### **æ€§èƒ½æå‡ï¼ˆæ™ºèƒ½è£åˆ‡ï¼‰**

| æŒ‡æ¨™ | Beforeï¼ˆç„¡è£åˆ‡ï¼‰ | Afterï¼ˆæ™ºèƒ½è£åˆ‡ï¼‰ | æå‡ |
|------|-----------------|------------------|------|
| è­˜åˆ¥æº–ç¢ºåº¦ | 85-90% | **92-96%** | +5-10% |
| èƒŒæ™¯å¹²æ“¾ | å¤§é‡ | **å¹¾ä¹ç„¡** | âœ… |
| æ‰‹è‡‚å®Œæ•´æ€§ | å¯èƒ½è£åˆ‡ | **100% ä¿ç•™** | âœ… |
| è™•ç†æ™‚é–“ | ~20-35s | ~25-40s | +3-5s |

## å½±ç‰‡ç®¡ç†

### è‡ªå‹•ä¿ç•™ç­–ç•¥
- æ‰€æœ‰é€é Messenger Bot æ”¶åˆ°çš„å½±ç‰‡æœƒ**ä¿ç•™**åœ¨ä¼ºæœå™¨ä¸Š
- å½±ç‰‡å­˜æ”¾æ–¼ `DATA_DIR/downloaded_videos/` ç›®éŒ„
- é‡è¤‡å½±ç‰‡æœƒè·³éä¸‹è¼‰ï¼ˆåŸºæ–¼ MD5 å“ˆå¸Œæª¢æ¸¬ï¼‰
- å·²è™•ç†çš„å½±ç‰‡å¯ç›´æ¥ä½¿ç”¨ï¼Œç„¡éœ€é‡æ–°è­˜åˆ¥

### å½±ç‰‡å„²å­˜ç©ºé–“ä¼°ç®—
- å–®å€‹æ‰‹èªå½±ç‰‡ï¼š5-50 MBï¼ˆä¾é•·åº¦è€Œå®šï¼‰
- å»ºè­°é ç•™ç©ºé–“ï¼š2-5 GBï¼ˆç´„ 100-200 å€‹å½±ç‰‡ï¼‰

### æ‰‹å‹•æ¸…ç†å½±ç‰‡
å¦‚éœ€æ¸…ç†èˆŠå½±ç‰‡ï¼Œå¯é€éä»¥ä¸‹æ–¹å¼ï¼š

#### æ–¹æ³• 1ï¼šåˆªé™¤ç‰¹å®šå½±ç‰‡
```bash
# åœ¨ Zeabur Dashboard ä¸­é€²å…¥ Container Shell
# æˆ–ä½¿ç”¨ Zeabur CLI

# åˆªé™¤ç‰¹å®šå½±ç‰‡
cd /app/data/downloaded_videos
rm <video_hash>.mp4
```

#### æ–¹æ³• 2ï¼šæ¸…ç©ºæ‰€æœ‰å½±ç‰‡
```bash
# åˆªé™¤æ‰€æœ‰å½±ç‰‡
rm -rf /app/data/downloaded_videos/*

# æ¸…ç©ºå“ˆå¸Œè¨˜éŒ„ï¼ˆé‡è¦ï¼ï¼‰
rm /app/data/downloaded_videos.json
rm /app/data/processed_count.json

# é‡å•Ÿæœå‹™ï¼ˆåœ¨ Zeabur Dashboard ä¸­ï¼‰
```

#### æ–¹æ³• 3ï¼šè¨­å®šè‡ªå‹•æ¸…ç†ï¼ˆcron jobï¼‰
```bash
# æ¯é€±æ—¥å‡Œæ™¨ 2 é»æ¸…ç† 30 å¤©å‰çš„å½±ç‰‡
0 2 * * 0 find /opt/render/project/data/downloaded_videos -name "*.mp4" -mtime +30 -delete
```

## ç–‘é›£æ’è§£

### éƒ¨ç½²ç›¸é—œ

#### å•é¡Œï¼šRender éƒ¨ç½²å¤±æ•—ï¼Œæç¤ºè¨˜æ†¶é«”ä¸è¶³
**åŸå› **ï¼šæ·±åº¦å­¸ç¿’ä¾è³´åŒ…ï¼ˆTensorFlowã€PyTorchï¼‰é«”ç©è¼ƒå¤§

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ Docker éƒ¨ç½²ï¼ˆæ›´ç©©å®šï¼‰
2. å‡ç´šåˆ° Standard æˆ–æ›´é«˜ç­‰ç´šçš„ Instance Type
3. å¦‚æœä½¿ç”¨ Python éƒ¨ç½²ï¼Œç¢ºä¿ Build æ™‚é–“ä¸è¶…æ™‚ï¼ˆèª¿æ•´ Build Commandï¼‰

#### å•é¡Œï¼šæ¨¡å‹è¼‰å…¥å¤±æ•—
**åŸå› **ï¼šæ¨¡å‹æ–‡ä»¶æœªæ­£ç¢ºä¸Šå‚³åˆ° Git å€‰åº«

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```bash
# ç¢ºèªæ¨¡å‹æ–‡ä»¶å­˜åœ¨
ls -lh model_output/best_model_mps.keras
ls -lh model_output/label_map.json

# å¦‚æœæ–‡ä»¶éå¤§ï¼ˆ>100MBï¼‰ï¼Œä½¿ç”¨ Git LFS
git lfs install
git lfs track "*.keras"
git add .gitattributes
git add model_output/best_model_mps.keras
git commit -m "Add model with Git LFS"
git push

# æª¢æŸ¥ Zeabur éƒ¨ç½²ç‹€æ…‹
curl "https://signar.zeabur.app/debug"
```

#### å•é¡Œï¼šOpenCV æˆ– MediaPipe ç„¡æ³•è¼‰å…¥
**åŸå› **ï¼šç¼ºå°‘ç³»çµ±ä¾è³´

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨æä¾›çš„ Dockerfileï¼ˆå·²åŒ…å«æ‰€éœ€ä¾è³´ï¼‰
- æˆ–åœ¨ Render Build Command ä¸­æ·»åŠ ï¼š
```bash
apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && pip install -r requirements.txt
```

### è­˜åˆ¥ç›¸é—œ

#### å•é¡Œï¼šè­˜åˆ¥çµæœä¸æº–ç¢º
**å¯èƒ½åŸå› **ï¼š
1. å½±ç‰‡å“è³ªä¸ä½³ï¼ˆæ¨¡ç³Šã€å…‰ç·šä¸è¶³ï¼‰
2. æ‰‹èªå‹•ä½œä¸å®Œæ•´æˆ–éå¿«
3. å½±ç‰‡è§’åº¦ä¸æ­£ç¢º

**å»ºè­°**ï¼š
- ä½¿ç”¨æ­£é¢æ‹æ”ï¼Œç¢ºä¿æ‰‹éƒ¨å’Œä¸ŠåŠèº«æ¸…æ™°å¯è¦‹
- æ¯å€‹æ‰‹èªå‹•ä½œæŒçºŒ 2-3 ç§’
- å……è¶³å…‰ç·šï¼Œé¿å…èƒŒå…‰

#### å•é¡Œï¼šè­˜åˆ¥é€Ÿåº¦éæ…¢
**åŸå› **ï¼šå½±ç‰‡éé•·ï¼Œçª—å£éå¤š

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. èª¿æ•´æ»‘å‹•æ­¥é•·ï¼ˆä¿®æ”¹ `stride` åƒæ•¸ï¼‰
2. å‡ç´š Render Instance Typeï¼ˆæ›´å¤š CPU æ ¸å¿ƒï¼‰
3. ä½¿ç”¨è¼ƒçŸ­çš„å½±ç‰‡ï¼ˆå»ºè­° 10 ç§’ä»¥å…§ï¼‰

#### å•é¡Œï¼šOpenAI å¥å­é‡çµ„å¤±æ•—
**åŸå› **ï¼šæœªè¨­å®š `OPENAI_API_KEY` æˆ– API é…é¡ç”¨ç›¡

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- è¨­å®šæœ‰æ•ˆçš„ OpenAI API Key
- æˆ–ä¸ä½¿ç”¨ OpenAIï¼ˆç³»çµ±æœƒè‡ªå‹•ä½¿ç”¨ Top-1 å–®è©åºåˆ—ï¼‰

### Messenger Bot ç›¸é—œ

#### å•é¡Œï¼šå‰ç«¯ç„¡æ³•æ’­æ”¾å½±ç‰‡
**åŸå› **ï¼š
- å½±ç‰‡è·¯å¾‘éŒ¯èª¤
- æª”æ¡ˆæ¬Šé™å•é¡Œ
- ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ ¼å¼

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰ 404 éŒ¯èª¤ï¼š`https://signar.zeabur.app/videos/<hash>`
2. ç¢ºèªå½±ç‰‡æª”æ¡ˆå­˜åœ¨ï¼š
```bash
# åœ¨ Zeabur Container Shell ä¸­æª¢æŸ¥
ls -lh /app/data/downloaded_videos/
```
3. æª¢æŸ¥æª”æ¡ˆæ¬Šé™ï¼š
```bash
chmod 644 /app/data/downloaded_videos/*.mp4
```

#### å•é¡Œï¼šMessenger ç„¡æ³•å›è¦†è¨Šæ¯
**åŸå› **ï¼š
- `PAGE_ACCESS_TOKEN` éŒ¯èª¤æˆ–éæœŸ
- ç¶²è·¯é€£ç·šå•é¡Œ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. åœ¨ Facebook Developers Console é‡æ–°ç”Ÿæˆ Token
2. ç¢ºèª Render ä¼ºæœå™¨èƒ½é€£æ¥ `graph.facebook.com`ï¼š
```bash
curl https://graph.facebook.com/v18.0/me?access_token=YOUR_TOKEN
```
3. æŸ¥çœ‹ Render Logs ç¢ºèªéŒ¯èª¤è¨Šæ¯

#### å•é¡Œï¼šWebSocket é€£ç·šå¤±æ•—
**åŸå› **ï¼šé˜²ç«ç‰†æˆ–ä»£ç†ä¼ºæœå™¨é˜»æ“‹

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- ç¢ºèª Zeabur å…è¨± WebSocket é€£ç·šï¼ˆé è¨­æ”¯æ´ï¼‰
- æª¢æŸ¥å‰ç«¯æ§åˆ¶å°æ˜¯å¦æœ‰ Socket.IO éŒ¯èª¤ï¼š`https://signar.zeabur.app/`
- å˜—è©¦é‡æ–°æ•´ç†é é¢
- æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦é˜»æ“‹ WebSocket

### æ•ˆèƒ½å„ªåŒ–

#### æå‡è­˜åˆ¥é€Ÿåº¦
1. **èª¿æ•´çª—å£æ­¥é•·**ï¼š
```python
# åœ¨ app.py ä¸­ä¿®æ”¹
recognizer = SlidingWindowInference(
    stride=80  # å¢åŠ æ­¥é•·ï¼Œæ¸›å°‘çª—å£æ•¸é‡
)
```

2. **ä½¿ç”¨ GPU**ï¼ˆå¦‚æœ Zeabur æ”¯æ´ï¼‰ï¼š
```python
recognizer = SlidingWindowInference(
    device='gpu'  # ä½¿ç”¨ GPU åŠ é€Ÿ
)
```

3. **é è¼‰å…¥æ¨¡å‹**ï¼š
- ç³»çµ±å•Ÿå‹•æ™‚è‡ªå‹•è¼‰å…¥ï¼Œç„¡éœ€æ¯æ¬¡é‡æ–°è¼‰å…¥

#### é™ä½è¨˜æ†¶é«”ä½¿ç”¨
1. å®šæœŸæ¸…ç†èˆŠå½±ç‰‡
2. ä½¿ç”¨è¼ƒå°çš„æ‰¹æ¬¡å¤§å°
3. é—œé–‰ä¸å¿…è¦çš„æ—¥èªŒè¼¸å‡º

## é–‹ç™¼æŒ‡å—

### æœ¬åœ°é–‹ç™¼

```bash
# 1. Clone å°ˆæ¡ˆ
git clone <your-repo-url>
cd å¤§å°ˆç”Ÿé™¢æ ¡

# 2. å»ºç«‹è™›æ“¬ç’°å¢ƒ
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate  # Windows

# 3. å®‰è£ä¾è³´
pip install -r requirements.txt

# 4. è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env
# ç·¨è¼¯ .env å¡«å…¥ä½ çš„ Token

# 5. å•Ÿå‹•æœå‹™
python app.py
```

### ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦

```bash
# æ¸¬è©¦ç”Ÿç”¢ç’°å¢ƒ
curl "https://signar.zeabur.app/health"
curl "https://signar.zeabur.app/debug"
curl "https://signar.zeabur.app/queue_status"
```

### æ¸¬è©¦æ‰‹èªè­˜åˆ¥

```python
from sliding_window_inference import SlidingWindowInference

# åˆå§‹åŒ–è­˜åˆ¥å™¨
recognizer = SlidingWindowInference(
    model_path='model_output/best_model_mps.keras',
    label_map_path='model_output/label_map.json',
    device='cpu',
    stride=80,
    openai_api_key='your-api-key'  # é¸å¡«
)

# è™•ç†å½±ç‰‡
results = recognizer.process_video('test_video.mp4')

# ç²å–å¥å­
if recognizer.openai_client:
    sentence, explanation = recognizer.compose_sentence_with_openai(results)
    print(f"è­˜åˆ¥çµæœ: {sentence}")
```

### ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦ç¯„ä¾‹

```python
# ä½¿ç”¨ç”Ÿç”¢ç’°å¢ƒ API æ¸¬è©¦
import requests

# æª¢æŸ¥å¥åº·ç‹€æ…‹
response = requests.get('https://signar.zeabur.app/health')
print(f"å¥åº·æª¢æŸ¥: {response.json()}")

# æª¢æŸ¥éšŠåˆ—ç‹€æ…‹
response = requests.get('https://signar.zeabur.app/queue_status')
print(f"éšŠåˆ—ç‹€æ…‹: {response.json()}")
```

### æ–°å¢æ‰‹èªå–®è©

1. **æº–å‚™è¨“ç·´æ•¸æ“š**ï¼šæ¯å€‹å–®è©è‡³å°‘ 50 å€‹å½±ç‰‡æ¨£æœ¬
2. **é‡æ–°è¨“ç·´æ¨¡å‹**ï¼šä½¿ç”¨ `training/train_bigrunet_tpu.py`
3. **æ›´æ–°æ¨™ç±¤æ˜ å°„**ï¼šä¿®æ”¹ `model_output/label_map.json`
4. **æ¸¬è©¦æ–°æ¨¡å‹**ï¼šç¢ºä¿æº–ç¢ºç‡é”æ¨™
5. **éƒ¨ç½²æ›´æ–°**ï¼šæ¨é€åˆ° Git å€‰åº«ï¼ŒRender è‡ªå‹•é‡æ–°éƒ¨ç½²

## æˆæ¬Š

MIT License

## è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é–‹ Issue æˆ– Pull Requestã€‚

---

## ç”Ÿç”¢ç’°å¢ƒ

### ç›®å‰éƒ¨ç½²ç‹€æ…‹
- **å¹³å°**: Zeabur
- **URL**: https://signar.zeabur.app/
- **ç‹€æ…‹**: âœ… æ­£å¸¸é‹è¡Œ
- **åŠŸèƒ½**: å®Œæ•´çš„æ‰‹èªè­˜åˆ¥ç³»çµ±ï¼ˆæ™ºèƒ½è£åˆ‡ + æ’éšŠç³»çµ± + å¤šèªè¨€æ”¯æ´ï¼‰

### ç³»çµ±è¦æ ¼
- **æŠ€è¡“å †ç–Š**: Flask + Socket.IO + TensorFlow + MediaPipe
- **æ¨¡å‹**: BiGRU + æ³¨æ„åŠ›æ©Ÿåˆ¶ï¼ˆ15 å€‹æ‰‹èªå–®è©ï¼‰
- **æº–ç¢ºåº¦**: 92-96%ï¼ˆæ™ºèƒ½è£åˆ‡å¾Œï¼‰
- **è™•ç†æ™‚é–“**: ~25-40 ç§’/å½±ç‰‡
- **æ”¯æ´èªè¨€**: ç¹ä¸­ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ“æ–‡

### è¯çµ¡æ¸¬è©¦
å¦‚éœ€æ¸¬è©¦ç³»çµ±ï¼Œè«‹é€é Facebook Messenger ç™¼é€æ‰‹èªå½±ç‰‡è‡³å·²è¨­å®šä¹‹ç²‰çµ²å°ˆé ã€‚

---

**éƒ¨ç½²å®Œæˆå¾Œå³å¯ä½¿ç”¨** ğŸš€ğŸ¤Ÿ